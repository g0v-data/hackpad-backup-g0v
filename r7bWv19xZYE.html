<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-us" />
<meta name="version" content="406"/>
<style>body {font-family:Helvetica}ul.comment{list-style-image:url('https://hackpad.com/static/img/comment.png');} ul.task{list-style-image:url('https://hackpad.com/static/img/unchecked.png');}ul.taskdone{list-style-image:url('https://hackpad.com/static/img/checked.png');} </style><title>/683$r7bWv19xZYE</title>
</head>
<body><h1>立院看門狗</h1><p></p><ul class="comment"><li>接續<a href='https://g0v.hackpad.com/ep/profile/EcUrTWSKroj'/>Jimmy Huang</a>在g0v-ly的立院訂閱器</li></ul>
<ul><li>發起人/拋磚人：<a href='https://g0v.hackpad.com/ep/profile/ENS06ylFWb8'/>TYLo</a></li>
<li><b>狀態</b>：<ul><li>目前事件/法條對應API完成</li>
<li>8/10 完成polling機制，utilities</li>
<li>前端卡在認證，需要熟OAuth機制的人指導</li></ul>
<ul class="comment"><li>之前類似專案: <a href="https://g0v.neticrm.tw"></a><a href='https://g0v.neticrm.tw/'/>https://g0v.neticrm.tw</a></li></ul>
</ul>
<ul><li><b>訂閱對象：</b></li><ul class="taskdone"><li>會議預報</li></ul>
<ul class="task"><li>會議議程</li>
<li>委員發言</li>
<li>委員書面質詢、行政院回覆</li>
<li>法案進度</li></ul>
</ul>
<ul><li>簡介：連結gmail帳號 or Facebook帳號透過API發帳號透過API發送訊息</li>
<li>實現邏輯：<ul><li>訂閱<ul><li>使用者填入關鍵字(可以是事件/法條)直接訂閱。</li>
<li>如果填入事件，能夠自動產生相對應法條(由一個月內新聞抽取)。</li>
<li>可以選擇FB或是mail方式收到訊息</li></ul>
</li>
<li>發送<ul><li>以polling方式取得新的公報/議程，就觸發notify機制，發送email與Facebook通知。email發送使用gmail API，FB還需要寫APP。</li></ul>
</li></ul>
</li>
<li>資料來源:<ul><li>立法院(官方)：<a href="http://www.ly.gov.tw/01_lyinfo/0109_meeting/meetingList.action"></a><a href='http://www.ly.gov.tw/01_lyinfo/0109_meeting/meetingList.action'/>http://www.ly.gov.tw/01_lyinfo/0109_meeting/meetingList.action</a></li>
<li>預報api：<a href="https://groups.google.com/forum/?hl=zh-TW#"></a><a href='https://groups.google.com/forum/?hl=zh-TW#!topic/g0v-ly/VDaUzk9GJRI'/>https://groups.google.com/forum/?hl=zh-TW#</a><a href='https://groups.google.com/forum/?hl=zh-TW#!topic/g0v-ly/VDaUzk9GJRI'/>!topic/g0v-ly/VDaUzk9GJRI</a></li>
<li>法令列表：<a href="https://github.com/g0v/laweasyread-data"></a><a href='https://github.com/g0v/laweasyread-data'/>https://github.com/g0v/laweasyread-data</a></li></ul>
</li>
<li>hackfolder：<a href="http://hack.g0v.tw/ly-watchdog/r7bWv19xZYE"></a><a href='http://hack.g0v.tw/ly-watchdog/r7bWv19xZYE'/>http://hack.g0v.tw/ly-watchdog/r7bWv19xZYE</a></li>
<li>github：<a href="https://github.com/sweslo17/ly-watchdog"></a>https://github.com/sweslo17/ly-watchdog</li>
<li>目前完成：<ul><li>事件&lt;==&gt;法條對應api(example)：<a href="http://gaisq.cs.ccu.edu.tw:9999/query?term=洪仲丘"></a>http://gaisq.cs.ccu.edu.tw:9999/query?term=洪仲丘</li>
<li><b>系統架構</b></li></ul>
</ul>
<p><img src='https://hackpad-attachments.s3.amazonaws.com/hackpad.com_r7bWv19xZYE_p.65297_1375977854827_system.PNG'/></p><ul><li><b>Mockup</b></li></ul>
<p><img src='https://dl.dropboxusercontent.com/u/14253954/ly-watchdog_mockup.png'/></p><ul><li>短期目標：<ul><li>完成介面、能夠對預報做訂閱。</li></ul>
</li>
<li>支線任務：</li></ul>
<ul style="list-style: none;"><li>國會圖書館 立法院智庫 (npl)</li><ul><li>一大堆彼此稍微重疊的系統 (tts): <a href="http://npl.ly.gov.tw/do/www/homePage"></a><a href='http://npl.ly.gov.tw/do/www/homePage'/>http://npl.ly.gov.tw/do/www/homePage</a><ul><li>可以使用 <a href='https://github.com/g0v/ly-crx'/>ly-crx extension</a> (<a href='https://chrome.google.com/webstore/detail/%E7%AB%8B%E6%B3%95%E9%99%A2%E6%93%B4%E5%85%85/ingofalhkimajgdgaplblnkhpenjhmpo?hl=en'/>安裝</a>), 會增加一個 download-all 的 link</li><ul class="task"><li>需要一個 cli script 直接 download (該系統無 cookie, 所有 state 都是 serialize在 post request 中, 而且 form encoding 為 big5)</li></ul>
</ul>
<ul><li>encoding: big5-2003 (iconv -f big5-2003 -t utf-8)</li>
<li>然後用 <a href="https://github.com/g0v/twlyparser/blob/master/parse-tts.ls"></a><a href='https://github.com/g0v/twlyparser/blob/master/parse-tts.ls'/>https://github.com/g0v/twlyparser/blob/master/parse-tts.ls</a> 做初步理處理產生 json</li></ul>
</li>
<li>主要有三部分：<ul><li>議案系統 (motions) 包含法律提案跟其他提案</li>
<li>質詢系統 (書面+口頭)</li>
<li>法律提案系統 (bill)&nbsp; <a href="http://lis.ly.gov.tw/lgcgi/ttsweb?@0:0:1:lgmempropg08"></a><a href='http://lis.ly.gov.tw/lgcgi/ttsweb?@0:0:1:lgmempropg08'/>http://lis.ly.gov.tw/lgcgi/ttsweb?@0:0:1:lgmempropg08</a></li><ul class="task"><li>希望能 decode 「提案影像」link 那串 hex 的意義，以便能直接 link</li></ul>
<ul><li>例如 <a href="https://dl.dropboxusercontent.com/u/30657009/ly/08-bills.json"></a><a href='https://dl.dropboxusercontent.com/u/30657009/ly/08-bills.json'/>https://dl.dropboxusercontent.com/u/30657009/ly/08-bills.json</a> 中 <a href="http://lis.ly.gov.tw/lgcgi/lgmeetimage?cfc7cfcccecdc8cdc5cccccad2cccbcf"></a><a href='http://lis.ly.gov.tw/lgcgi/lgmeetimage?cfc7cfcccecdc8cdc5cccccad2cccbcf'/>http://lis.ly.gov.tw/lgcgi/lgmeetimage?cfc7cfcccecdc8cdc5cccccad2cccbcf</a> 為 08屆03期12次 議事日程 Page 0335-0340「1559政14576」</li>
<li>這邊的進度其實就是前項議案系統的 query. 這兩個系統的「系統號」並非通用，所以必須用「提案代號」去查詢。</li>
<li>json: <a href="https://docs.google.com/folder/d/0By7Ba0S6YJxNUS1ySG9kczdPTDA/edit?usp=sharing"></a><a href='https://docs.google.com/folder/d/0By7Ba0S6YJxNUS1ySG9kczdPTDA/edit?usp=sharing'/>https://docs.google.com/folder/d/0By7Ba0S6YJxNUS1ySG9kczdPTDA/edit?usp=sharing</a></li>
<li>simple api: <a href="http://twdata.cloudfoundry.com"></a><a href='http://twdata.cloudfoundry.com/'/>http://twdata.cloudfoundry.com</a> (broken?)</li>
<li>TODO: dashboard</li></ul>
</ul>
</ul>
</ul>
<p>協作者:</p><p><a href='/ep/profile/ENS06ylFWb8'/>TYLo</a>,<a href='/ep/profile/xrSLRdDkACP'/>Terces Tsai</a></p><ul class="taskdone"><li>NeedsTech: 需要技術支援：目前使用polling機制。需要FB app，mail module</li><ul class="comment"><li>如果預報的話，其實不適合使用公報當 source，因為會晚兩三週</li>
<li>要不要參考一下 <a href='http://developer.github.com/v3/repos/hooks/#pubsubhubbub'/>github hook PSHB api</a> 設計一下 subscribe api, 然後看如何在 api.ly.g0v.tw implement 這個部分？</li>
<li>這裡有筆誤，其實是以立院預報為source，公報為法案追蹤部份，應該之後會追加</li></ul>
</ul>
<ul class="taskdone"><li>NeedsWriter: 需要文案幫手（撰寫提示訊息、Email的訊息範本）</li>
<li>NeedsDiscuss:&nbsp;</li>
<li>NeedsTest: 訂閱、發送流程需要測試</li></ul>

</body>
</html>
