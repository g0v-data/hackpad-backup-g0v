<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-us" />
<meta name="version" content="1485"/>
<style>body {font-family:Helvetica}ul.comment{list-style-image:url('https://hackpad.com/static/img/comment.png');} ul.task{list-style-image:url('https://hackpad.com/static/img/unchecked.png');}ul.taskdone{list-style-image:url('https://hackpad.com/static/img/checked.png');} </style><title>/683$6XVrKUuHEcx</title>
</head>
<body><h1>Rails Girls 3rd Note</h1><ul class="comment"><li>要不要 commit 到 <a href="https://github.com/g0v/g0v.today"></a>https://github.com/g0v/g0v.today 讓大家可以跟著操作? :factory:&nbsp;&nbsp;</li>
<li>需要分開 repo 嗎現在整個架構都不一樣惹 QQ</li>
<li>不同的次目錄就好吧:question:&nbsp;&nbsp;</li>
<li>roger，那開一個 rails 目錄？</li>
<li>突然發現你沒用到 master branch... 那當然就是放 master branch 啦 :+1:&nbsp;&nbsp;</li>
<li>那樣要手動 merge 到 gh-pages 嗎？不過用 rails 以後 gh-pages 也不能動惹… QQ</li>
<li>對啊所以才要放 master :8ball:&nbsp;&nbsp;</li>
<li>好 ^o^</li>
<li>:dancers: :octocat:&nbsp;&nbsp;</li>
<li>好像好了耶 @o@&nbsp;&nbsp;&nbsp; :100:&nbsp; :smile_cat:&nbsp;</li>
<li>似乎是裝完了... 軌道少女團的文件寫得真不錯</li>
<li>而且只有大綱所以很有彈性，同一個教練教的組員之間進度可以完全不同… XD</li>
<li>rails server 會動了，之前沒有 git add bin/ (因為被上層目錄的 .gitignore 擋住)，現在修好了。</li>
<li>pulled! :octocat:&nbsp;</li>
<li>:yellow_heart: 也太可愛了吧好多符號&nbsp;</li></ul>

<p><b>安裝 Rails (Rails Girls 官方文件)</b></p><p><a href="http://railsgirls.tw/install/"></a>http://railsgirls.tw/install/</p><p></p><p><b>妳的第一個 Rails App (Rails Girls 官方文件)</b></p><p><a href="http://railsgirls.tw/app/"></a>http://railsgirls.tw/app/</p><p></p><p><b>安裝 slim-rails / semantic-rails / compass-rails / ...</b></p><p>依照官方文件打 gem 指令安裝</p><p>在 gemfile 加入官方文件的設定</p><p>指令 bundle install</p><p></p><p><b>使用 slim-rails</b></p><p>把 .html.erb 檔名改成 .html.slim</p><p></p><p><b>讓輸出的 html 排版便於 debug</b></p><p>slim pretty output: <a href="http://stackoverflow.com/questions/17291030/rails-slim-source-output"></a><a href='http://stackoverflow.com/questions/17291030/rails-slim-source-output'/>http://stackoverflow.com/questions/17291030/rails-slim-source-output</a></p><p>dev / production / test 三種不同環境有各自的最佳設定，比方說開發環境需要輸出好看的 html 方便 debug，但是上線環境不要，所以 slim pretty output 的設定只寫在 config &gt; environment &gt; development.rb 裡面</p><p></p><p><b>設定 css 檔案的順序</b></p><p>app/assets/stylesheets/application.css 中</p><p>&nbsp;*= require &rsquo;semantic-ui&rsquo;</p><ul class="comment"><li>開頭的 *= 會被解讀成設定用的指令，如果把 * 跟 = 中間加一個空白那就不會被執行</li></ul>
<p>&nbsp;*= require &rsquo;global&rsquo;</p><ul class="comment"><li>&nbsp;想要讓 global 蓋掉 semantic-ui 的話，要把 global 寫在後面</li></ul>
<p>&nbsp;*= require_self</p><ul class="comment"><li>預設會有的，意思是 require 本檔案中這段註解結束後所寫的東西</li></ul>
<p>*= require_tree (相對路徑)</p><ul class="comment"><li>也是預設會有的，意思是抓取 (相對路徑) 目錄裡的所有檔案，依照檔名排序</li>
<li>也因此會出現 semantic ui.css 蓋掉客製化的 global.css 的問題</li>
<li>除非很知道自己在幹嘛，非常不建議使用這一行，建議用白名單，而非地圖砲</li></ul>
<p>&nbsp;*/</p><ul class="comment"><li>css 註解結束</li></ul>

<p><b>設定 js 檔的順序</b></p><p>原理同上</p><p>//= require turbolinks</p><ul class="comment"><li>rails 4 新功能，換頁時用 ajax 撈出想換的那一頁塞到這一頁裡面，不好掌控，會產生 data-turbolinks-track=&quot;true&quot;&nbsp; 這段東西，不很知道幹嘛的話建議關掉</li>
<li>&lt;script data-turbolinks-track=&quot;true&quot; src=&quot;/assets/jquery_ujs.js?body=1&quot;&gt;&lt;/script&gt;</li>
<li><a href="http://geekmonkey.org/articles/28-introducing-turbolinks-for-rails-4-0"></a>http://geekmonkey.org/articles/28-introducing-turbolinks-for-rails-4-0</li></ul>

<p><b>更改專案名稱</b></p><p>folder name 直接改就可以了</p><p>code name 在 config &gt; application.rb 裡面，通常習慣跟 folder name 一樣，但要分開也行…後來我放棄改 code name 了因為好像要改很多地方，怕爛掉 XD</p><ul class="comment"><li>改這個檔案要重跑 server</li>
<li>config 裡面的 env... app... 有改的話都要重開</li></ul>
<p>module G0vtoday</p><p>&nbsp;&nbsp;&nbsp; config.time_zone = &rsquo;Taipei&rsquo;</p><ul class="comment"><li>&nbsp;&nbsp;&nbsp; 可以順便改個時區</li></ul>
<p>&nbsp;&nbsp;&nbsp; config.i18n.default_locale = :&quot;zh-TW&quot;</p><ul class="comment"><li>可以順便設個 i18n 語系</li></ul>

<p><b>建立多對多關連</b></p><p>rails g migration (migration名稱，英文，字串，習慣用底線隔開，他會自動幫我們轉成 camel type)</p><ul class="comment"><li>會在db &gt; migration 裡面新增一個 timestamp_name.rb 檔，空的</li></ul>
<p>到 <i>timestamp_name.rb 裡面</i></p><p>&nbsp; def change</p><p>&nbsp;&nbsp;&nbsp; create_table :sessions_speakers do |t|</p><ul class="comment"><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 先寫 session 再寫 speaker 是因為 rails 的命名規則是按照字母順序排 ( se &lt; sp )，否則他會找不到 table</li></ul>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t.references :session</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t.references :speaker</p><p>&nbsp;&nbsp;&nbsp; end</p><p>&nbsp; end</p><p>指令 rake db:migrate</p><ul class="comment"><li>把設定檔寫入 sqlite 資料庫中</li>
<li>migration （資料庫遷移）用來控制（新增欄位）跟紀錄（別人用同一個migration檔案可以跑出一樣的結果）資料庫的儲存格式，因為資料庫本身是被gitignore掉的，不然測試環境跟上線環境的資料會混在一起</li></ul>
<p>到 model &gt; speaker.rb</p><p>&nbsp; has_and_belongs_to_many :sessions</p><p>到 model &gt; session.rb</p><p>&nbsp; has_and_belongs_to_many :speakers</p><ul class="comment"><li>讓這兩個原有的 model 知道彼此的關連</li></ul>

<p><b>migration</b></p><p>資料庫的設定檔</p><p><b>rake db:migrate</b></p><p>讓 migration 設定檔生效</p><p><b>model &gt; xxx.rb</b></p><p>裡面放資料庫關連、自訂對資料庫的操作、驗證、儲存或刪除後要多做哪些事情(callback)</p><p>model 裡面純粹的 column 會自動對應到，所以增加欄位不用改，只有增加 relation 的時候需要額外改 model 的 .rb 檔</p><p></p><p><b>時段、子時段 (STI)</b></p><p><a href="http://blog.thirst.co/post/14885390861/rails-single-table-inheritance"></a>http://blog.thirst.co/post/14885390861/rails-single-table-inheritance</p><p></p><p><b>為什麼 rails new 以後要 bundle install</b></p><p></p><p><b>為什麼 bundle install 以後要 rake db:migrate</b></p><p></p><p><b>為什麼 rails generate scaffold 以後要 rake db:migrate</b></p><p></p><p><b>class Xxxx &lt; ActiveRecord::Base 的意思是…</b></p><p>class</p><ul><li>以下鄭重宣布，有一個新品種 (的 ruby 物件) 要誕生了！</li></ul>
<p>Xxxxx</p><ul><li>新品種的名稱，開頭是大寫的英文字母</li></ul>
<p>&lt;&nbsp;</p><ul><li>繼承</li></ul>
<p>ActiveRecord::Base</p><ul><li>功能是把 Xxxx 這個品種對應到資料庫中名為 xxxx 的資料表</li></ul>
<p>::</p><ul><li>在 AR 下面切一個命名空間出來</li></ul>

</body>
</html>
